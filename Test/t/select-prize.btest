# Copyright (c) 2008-2009 bivio Software, Inc.  All Rights Reserved.
# $Id$
test_setup('Freiker');
login_as('wheel');
follow_link(qw(available_prize deliver_prize));
submit_form({
    zaptag => 1234,
});
follow_link('bunit50');
nudge_test_now();
submit_form('deliver');
follow_link(qw(available_prize deliver_prize));
submit_form({
    zaptag => 1235,
});
verify_text('This list is empty');
follow_link('give_trips');
submit_form({
    num => 20,
});
follow_link('bunit20');
nudge_test_now();
submit_form('deliver');
follow_link(qw(available_prize delivered_prizes));
verify_table(Delivered => [
    [qw(Prize Kid)],
    [qw(bunit20 child1)],
    [qw(bunit50 child)],
]);
do_logout();
login_as('adm');
follow_link('all_delivered_prizes');
verify_table(Delivered => [
    [qw(Prize Kid)],
    [qw(bunit20 child1)],
    [qw(bunit50 child)],
]);
login_as('wheel');
follow_link('delivered');
follow_link_in_table(qw(Delivered Prize bunit20 Actions return));
submit_form('return');
test_deviance(qr{bunit20.*not found});
verify_table(Delivered => [
    [qw(Prize Kid)],
    [qw(bunit20 child1)],
]);
